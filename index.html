<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Count To 1 Million</title>

<style>
    body {
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
    }

    button {
        padding: 15px 20px;
        font-size: 20px;
        cursor: pointer;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #317334;
    }

    #displayVariable {
        margin-top: 20px;
        font-size: 24px;
        font-weight: bold;
    }

    /* Message box */
    #messageBox {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #ffffff;
        color: #333333;
        font-weight: bold;
        border: 3px solid #333333;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 16px;
        opacity: 0;
        transition: opacity 0.5s ease;
        z-index: 2000;
        pointer-events: auto;
        min-width: 180px;
        text-align: center;
        cursor: pointer;
    }

    /* Slide Menu */
    #sideMenu {
        position: fixed;
        top: 0;
        right: -250px;
        width: 250px;
        height: 100%;
        background: #555;
        color: white;
        padding: 20px;
        box-sizing: border-box;
        transition: right 0.3s ease;
        z-index: 1000;
    }

    /* Shop Button */
    #menuBtn {
        position: fixed;
        top: 50%;
        right: 0;
        transform: translateY(-50%) rotate(-90deg) translateX(50%);
        width: 80px;
        background: gray;
        color: white;
        border: none;
        padding: 10px 15px;
        font-size: 16px;
        cursor: pointer;
        z-index: 1100;
        transition: right 0.3s ease;
        text-align: center;
    }

    .cost {
        font-size: 12px;
        color: yellow;
        margin: 1px 0;
    }

    #sideMenu button {
        background: gray;
        color: white;
        border: none;
        padding: 4px 8px;
        cursor: pointer;
        font-size: 14px;
        border-radius: 3px;
        transition: transform 0.1s, background 0.1s;
    }

    #sideMenu button:hover {
        background: #777;
    }

    #sideMenu button:active {
        transform: scale(0.8);
        background: #666;
    }

    #itemQuantity {
        font-size: 12px;
        margin-top: 4px;
        color: #FFD700;
    }
</style>
</head>

<body>

<button id="incrementButton">Click Me</button>
<p id="displayVariable">Current Value: 0</p>

<audio id="clickSound" src="computer-mouse-click-351398.mp3" preload="auto"></audio>

<div id="messageBox"></div>

<button id="menuBtn" onclick="toggleMenu()">Shop</button>

<div id="sideMenu">
    <h2>Shop</h2>
    <p>+1 click per second</p>
    <span id="itemQuantity">Purchased: 0</span>
    <p class="cost">Cost: 100 clicks</p>
    <button onclick="buyItem(this)" data-cost="100">Buy</button>
</div>

<script>
    let counter = 0;
    let autoClickRate = 0;
    let autoIncrementInterval = null;
    let itemQuantity = 0;

    const displayVariable = document.getElementById("displayVariable");
    const incrementButton = document.getElementById("incrementButton");
    const clickSound = document.getElementById("clickSound");
    const itemQuantityDisplay = document.getElementById("itemQuantity");
    const messageBox = document.getElementById("messageBox");
    let messageTimeout;

    /* ---------------------------
       LOAD SAVED DATA
    ----------------------------*/
    const saved = JSON.parse(localStorage.getItem("clickerSave"));
    if (saved) {
        counter = saved.counter || 0;
        autoClickRate = saved.autoClickRate || 0;
        itemQuantity = saved.itemQuantity || 0;

        displayVariable.textContent = `Current Value: ${counter}`;
        itemQuantityDisplay.textContent = `Purchased: ${itemQuantity}`;

        if (autoClickRate > 0) {
            autoIncrementInterval = setInterval(() => {
                counter += autoClickRate;
                displayVariable.textContent = `Current Value: ${counter}`;
            }, 1000);
        }
    }

    /* SAVE EVERY SECOND */
    setInterval(() => {
        const saveData = {
            counter,
            autoClickRate,
            itemQuantity
        };
        localStorage.setItem("clickerSave", JSON.stringify(saveData));
    }, 1000);

    /* MAIN CLICK */
    incrementButton.addEventListener('click', () => {
        counter++;
        displayVariable.textContent = `Current Value: ${counter}`;
        clickSound.currentTime = 0;
        clickSound.play();
    });

    /* SHOP TOGGLE (5px gap) */
    let menuOpen = false;

    function toggleMenu() {
        const menu = document.getElementById("sideMenu");
        const btn = document.getElementById("menuBtn");

        if (!menuOpen) {
            menu.style.right = "0";
            btn.style.right = "255px"; // 5px gap from 250px menu
            menuOpen = true;
        } else {
            menu.style.right = "-250px";
            btn.style.right = "0";
            menuOpen = false;
        }
    }

    /* MESSAGES */
    function showMessage(text) {
        if (messageTimeout) clearTimeout(messageTimeout);
        messageBox.textContent = text;
        messageBox.style.opacity = 1;

        messageTimeout = setTimeout(() => {
            messageBox.style.opacity = 0;
        }, 2000);
    }

    messageBox.addEventListener("click", () => {
        messageBox.style.opacity = 0;
        if (messageTimeout) clearTimeout(messageTimeout);
    });

    /* BUY ITEM */
    function buyItem(button) {
        const cost = parseInt(button.getAttribute('data-cost'));

        if (counter >= cost) {
            counter -= cost;
            displayVariable.textContent = `Current Value: ${counter}`;

            autoClickRate++;
            itemQuantity++;
            itemQuantityDisplay.textContent = `Purchased: ${itemQuantity}`;

            showMessage("You bought the item!");

            if (!autoIncrementInterval) {
                autoIncrementInterval = setInterval(() => {
                    counter += autoClickRate;
                    displayVariable.textContent = `Current Value: ${counter}`;
                }, 1000);
            }

        } else {
            showMessage("Not enough clicks!");
        }
    }
</script>

</body>
</html>
